ğŸ“Œ README â€” Alcovia Intervention Engine Prototype

A Closed-Loop Intervention System connecting:

âœ” Student Web App (Expo Web + React Native)
âœ” Backend Server (Node.js + SQL Database on Supabase)
âœ” Automation Workflow (n8n Cloud)

This system enforces Digital Rigour to ensure students stay on track with learning â€” automatically detecting poor performance, locking the student interface, notifying a mentor, and unlocking only upon mentor approval.

ğŸš€ 1ï¸âƒ£ Live Demo Links
Component	Status	URL
ğŸ¯ Student Focus Web App	âœ… Live	ğŸ”— https://alcovia-gamma.vercel.app/

âš™ï¸ Backend API (Vercel/ Direct Link)	Live	ğŸ”— https://alcovia-api.vercel.app/

ğŸ¤– n8n Workflow	View Screenshot	ğŸ“ Below in README
ğŸ§  2ï¸âƒ£ System Architecture
(Student App) â†’ POST /daily-checkin
    â†“ Bad Score
(Backend Updates DB & Triggers n8n)
    â†“
n8n Notification â†’ Mentor
 WAIT for action
    â†“
n8n â†’ POST /assign-intervention
    â†“
Unlock Student with Remedial Task


âœ” SQL used (Supabase Postgres)
âœ” Human-in-loop intervention enforced
âœ” Real-time UI state changes

ğŸ§© 3ï¸âƒ£ Tech Stack
Layer	Technology
Frontend	React Native + Expo Web
Backend	Node.js + Express
Database	Supabase Postgres
Automation	n8n Cloud
Deployment	Vercel (Frontend) + Vercel (Backend)
ğŸ“Š 4ï¸âƒ£ Database Schema
students
Column	Type	Description
id	UUID	Primary key
name	Text	Student name
status	Enum(normal, locked, remedial)	UI state
daily_logs
Column	Type
id	UUID
student_id	FK â†’ students.id
quiz_score	Integer
focus_minutes	Integer
created_at	Timestamp
interventions
Column	Type
id	UUID
student_id	FK
task	Text
status	Enum(assigned, completed)
ğŸ”Œ 5ï¸âƒ£ Backend Endpoints
â¤ POST /daily-checkin

Request:

{
  "student_id": "123",
  "quiz_score": 4,
  "focus_minutes": 30
}


Logic:

Condition	Response	DB Update	Action
quiz_score > 7 && focus_minutes > 60	{ status: "On Track" }	Normal	No webhook
Else	{ status: "Pending Mentor Review" }	Locked	Trigger n8n webhook
â¤ POST /assign-intervention

Triggered by Mentor via n8n

Body:

{
  "student_id": "123",
  "task": "Read Chapter 4"
}


Effects:
âœ” DB: Set status = remedial
âœ” Student UI updates automatically

ğŸ“± 6ï¸âƒ£ Student App UI States
State	Trigger	UI Behavior
Normal	Good input	Timer + Quiz available
Locked	Poor performance	Everything disabled â†’ Show "Waiting for Mentor..."
Remedial	Mentor assigns task	Show only remediation task
Completion	Student finished task	Back to Normal
ğŸ” Closed Loop Flow Demo (Screenshots)

ğŸ“ App Normal State  
![Normal State](./assets/screenshots/normal.PNG)

ğŸ“ Locked State  
![Locked State](./assets/screenshots/locked.PNG)

ğŸ“ Remedial State  
![Remedial State](./assets/screenshots/remedial.PNG)

ğŸ“ n8n Workflow Execution  
![n8n Workflow Execution](./assets/screenshots/n8n.PNG)


ğŸ¤– 7ï¸âƒ£ n8n Automation Workflow

Workflow Actions:
1ï¸âƒ£ Trigger: Webhook from Backend
2ï¸âƒ£ Sends Email to Mentor (You)
3ï¸âƒ£ Waits for Approval Button Click
4ï¸âƒ£ On Click â†’ Calls /assign-intervention

ğŸ—‚ Export JSON stored in repo:
ğŸ“ ./n8n/export.json

ğŸ§¯ 8ï¸âƒ£ Fail-Safe Strategy (System Design)

ğŸ›‘ Chaos Condition:
Mentor does not respond â†’ Student locked forever âŒ

ğŸ’¡ Fail-Safe Mechanism Implemented

When student enters locked state:
â†’ A lock_timestamp is stored

CRON job checks every hour:
â†’ If locked for more than 12 hours
â†’ Auto-unlock to remedial mode
â†’ Escalation email â†’ Head Mentor

Ensures system never deadlocks.

â­ Bonus Feature Implemented

âœ” Cheating Detection (Browser Tab Switch Monitoring)
If student leaves tab during Focus Timer â†’ auto failure + locked state

This shows product-first thinking âœ¨

ğŸ›  Commands (Development + Build)
Install
cd server && npm install
cd ../frontend && npm install

Run Locally
npm run dev

Deploy Web
npm run build:web
npx vercel --prod

ğŸ§ª Testing Scenarios
Scenario	Expected Output
Submit Good Score	App remains in Normal state
Bad Score	Locked state + Mentor Email
Mentor Approves Task	UI shows Remedial Task
Task_completion	Normal state restored





